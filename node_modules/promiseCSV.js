var csv = require('fast-csv');
var Promise = require('bluebird');
var fs = require('fs');


var ws = fs.createWriteStream('reportsData.csv');

var promiseCSV = Promise.method(function(path, payloads) {
    return new Promise(function(resolve, reject) {
        var records = [];
        csv
            .write(
                payloads
                ,{ 'headers': true })
            .pipe(ws);;
    });
});

module.exports = promiseCSV;